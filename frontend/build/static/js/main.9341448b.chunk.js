(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{46:function(e,t,a){e.exports=a(92)},55:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(23),r=a.n(c),l=a(9),o=(a(55),a(28)),s=a.n(o),d=a(41),m=a(3),u=a(4),h=a(6),v=a(5),p=a(1),f=a(7),b=a(8),g=a(20),E=a(2),C=a.n(E),k=a(10),y="http://ec2-13-209-75-246.ap-northeast-2.compute.amazonaws.com:8888",O="http://ec2-13-209-75-246.ap-northeast-2.compute.amazonaws.com:8888/api",S=(a(74),{"\uccad\uc18c\ub144\uad00\ub78c\ubd88\uac00":"adult","15\uc138\uc774\uc0c1\uad00\ub78c\uac00":"fifteen","12\uc138\uc774\uc0c1\uad00\ub78c\uac00":"twelve","\uc804\uccb4\uad00\ub78c\uac00":"all"}),j=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={type:"book",movieList:[]},a.goDetail=a.goDetail.bind(Object(p.a)(a)),a.sortMovie=a.sortMovie.bind(Object(p.a)(a)),a.bookMovie=a.bookMovie.bind(Object(p.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this;C.a.get("".concat(O,"/movie/movieList?type=book")).then(function(t){var a=t.data,n=a.ok,i=a.data;n&&e.setState({movieList:i})}).catch(function(e){})}},{key:"goDetail",value:function(e){this.props.history.push("/movie/detail/".concat(e))}},{key:"sortMovie",value:function(e){var t=this;e!==this.state.type&&C.a.get("".concat(O,"/movie/movieList?type=").concat(e)).then(function(a){var n=a.data,i=n.ok,c=n.data;i&&t.setState({type:e,movieList:c})}).catch(function(e){})}},{key:"bookMovie",value:function(e,t){this.props.history.push({pathname:"/ticket",state:{movieCode:e,movieName:t}})}},{key:"render",value:function(){var e=this,t=this.state.movieList;return i.a.createElement("div",{id:"movie-list-page",className:"flex-c"},i.a.createElement("div",{id:"header",className:"flex-r"},i.a.createElement("div",{id:"title"},"\ud604\uc7ac \uc0c1\uc601\uc791"),i.a.createElement("div",{id:"sorting",className:"flex-r"},i.a.createElement("div",{id:"type",onClick:function(){return e.sortMovie("book")}},"\uc608\ub9e4\uc728 \uc21c"),i.a.createElement("div",{id:"type",onClick:function(){return e.sortMovie("cumulative")}},"\uad00\ub78c\uac1d \uc21c"))),i.a.createElement("div",{id:"movies"},t.map(function(t){var a=t.code,n=t.title,c=t.watch_grade,r=t.thumbnail,l=t.cumulative,o=t.book_rate,s=(t.score_rate,S[c]);return i.a.createElement("div",{id:"movie",key:a,className:"flex-c ".concat(s)},i.a.createElement("div",{id:"poster"},i.a.createElement("img",{id:"thumbnail",src:"".concat(y,"/").concat(r)}),i.a.createElement("div",{id:"watch-grade",className:s})),i.a.createElement("div",{id:"name"},n),i.a.createElement("div",{id:"cumulative",className:"flex-r"},i.a.createElement("div",{id:"title"},"\ub204\uc801"),i.a.createElement("div",{id:"value"},null!=l?l.toLocaleString():"\uc9d1\uacc4\uc911")),i.a.createElement("div",{id:"statistics",className:"flex-r"},i.a.createElement("div",{id:"book-rate",className:"flex-r"},i.a.createElement("div",{id:"title"},"\uc608\ub9e4\uc728"),i.a.createElement("div",{id:"value"},null!=o?"".concat(o,"%"):"\uc9d1\uacc4\uc911"))),i.a.createElement("div",{id:"buttons",className:"flex-c center"},i.a.createElement("div",{id:"detail",onClick:function(){return e.goDetail(a)}},"\uc0c1\uc138\ubcf4\uae30"),i.a.createElement("div",{id:"book",onClick:function(){return e.bookMovie(a,n)}},"\uc608\ub9e4\ud558\uae30")))})))}}]),t}(n.Component),w=Object(l.b)(void 0,void 0)(j),x=(a(75),{"\uccad\uc18c\ub144\uad00\ub78c\ubd88\uac00":"adult","15\uc138\uc774\uc0c1\uad00\ub78c\uac00":"fifteen","12\uc138\uc774\uc0c1\uad00\ub78c\uac00":"twelve","\uc804\uccb4\uad00\ub78c\uac00":"all"}),N=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={code:a.props.match.params.code,imgCurIdx:0,data:{}},a.handleCurIdx=a.handleCurIdx.bind(Object(p.a)(a)),a.bookMovie=a.bookMovie.bind(Object(p.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.code;C.a.get("".concat(O,"/movie/movieDetail?code=").concat(t)).then(function(t){var a=t.data,n=a.ok,i=a.data;n&&e.setState({data:i})}).catch(function(e){})}},{key:"handleCurIdx",value:function(e){var t=e.target.id,a=this.state.imgCurIdx,n=this.state.data.stillCuts.length;"prev"===t?this.setState({imgCurIdx:a?a-1:0}):this.setState({imgCurIdx:a+1<n?a+1:a})}},{key:"bookMovie",value:function(e,t){this.props.history.push({pathname:"/ticket",state:{movieCode:e,movieName:t}})}},{key:"render",value:function(){var e=this,t=this.state.data,a=t.info,n=t.stillCuts,c=a||{},r=c.title,l=c.title_en,o=c.run_time,s=(c.product_year,c.nation),d=c.open,m=c.synopsis,u=c.watch_grade,h=c.thumbnail,v=c.show_status,p=c.cumulative,f=c.book_rate,b=(c.score_rate,x[u]),g=d?d.substr(0,4)+"."+d.substr(4,2)+"."+d.substr(6,2):"",E=this.state.imgCurIdx;return i.a.createElement("div",{id:"movie-detail",className:"flex-c"},i.a.createElement("div",{id:"page"},"\uc601\ud654\uc0c1\uc138"),i.a.createElement("div",{id:"header",className:"flex-r"},h&&i.a.createElement("img",{id:"thumbnail",src:"".concat(y,"/").concat(h)}),i.a.createElement("div",{id:"info",className:"flex-c"},i.a.createElement("div",{id:"badges",className:"flex-r"},i.a.createElement("div",{id:"badge",className:b},u),v&&i.a.createElement("div",{id:"badge"},"\uc0c1\uc601\uc911")),i.a.createElement("div",{id:"title"},r+""+(l&&" (".concat(l,")"))),i.a.createElement("div",{id:"statistics",className:"flex-r"},i.a.createElement("div",{id:"book",className:"flex-r"},i.a.createElement("div",{id:"label"},"\uc608\ub9e4\uc728"),i.a.createElement("div",{id:"percentage",className:"flex-r"},f&&i.a.createElement("div",{id:"rate",style:{width:"".concat(f,"%")}}),i.a.createElement("div",{id:"text"},null!=f?"".concat(f,"%"):"\uc9d1\uacc4\uc911")))),i.a.createElement("div",{id:"cumulative",className:"flex-r"},i.a.createElement("div",{id:"label"},"\ub204\uc801 \uad00\uac1d ",null!=p?p.toLocaleString()+"\uba85":"\uc9d1\uacc4\uc911")),i.a.createElement("div",{id:"others",className:"flex-r"},i.a.createElement("div",{id:"item"},s),i.a.createElement("div",{id:"item"},o," \ubd84"),i.a.createElement("div",{id:"item"},g," \uac1c\ubd09")),i.a.createElement("div",{id:"buttons",className:"flex-c"},i.a.createElement("div",{id:"book-btn",onClick:function(){return e.bookMovie(e.state.code,r)}},"\uc608\ub9e4\ud558\uae30")))),i.a.createElement("div",{id:"synopsis"},i.a.createElement("div",{id:"label"},"\uc2dc\ub189\uc2dc\uc2a4"),i.a.createElement("div",{id:"main",dangerouslySetInnerHTML:{__html:"".concat(m)}})),n&&i.a.createElement("div",{id:"still-cuts",className:"flex-c"},i.a.createElement("div",{id:"label"},"\uc2a4\ud2f8\ucef7 (","".concat(E+1," / ").concat(n.length),")"),i.a.createElement("div",{id:"imgs",className:"flex-r center"},n.map(function(e,t){var a=e.is_external,n=e.img;return i.a.createElement("img",{key:t,id:"img",src:a?n:"".concat(y,"/").concat(n),active:t==E?"true":"false"})})),E>0&&i.a.createElement("div",{id:"prev",onClick:this.handleCurIdx},"\uc774\uc804"),E+1<n.length&&i.a.createElement("div",{id:"next",onClick:this.handleCurIdx},"\ub2e4\uc74c")))}}]),t}(n.Component),L=Object(l.b)(void 0,void 0)(N),T=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.match;return i.a.createElement(g.d,null,i.a.createElement(g.b,{exact:!0,path:e.path,component:w}),i.a.createElement(g.b,{path:"".concat(e.path,"/detail/:code"),component:L}))}}]),t}(n.Component),I=Object(l.b)(void 0,void 0)(T),M=(a(77),{SUCCESS:"ALERT_SUCCESS",ERROR:"ALERT_ERROR",LOADING:"ALERT_LOADING",CLEAR:"ALERT_CLEAR"}),D={SIGNIN:"AUTH_SIGNIN",SIGNIN_SUCCESS:"AUTH_SIGNIN_SUCCESS",SIGNOUT:"AUTH_SIGNOUT",SIGNUP:"AUTH_SIGNUP"},A={success:function(e){return{type:M.SUCCESS,message:e}},error:function(e){return{type:M.ERROR,message:e}},loading:function(e){return{type:M.LOADING,message:e}},clear:function(){return{type:M.CLEAR}}};var R={"\uccad\uc18c\ub144\uad00\ub78c\ubd88\uac00":"adult","15\uc138\uc774\uc0c1\uad00\ub78c\uac00":"fifteen","12\uc138\uc774\uc0c1\uad00\ub78c\uac00":"twelve","\uc804\uccb4\uad00\ub78c\uac00":"all"},G=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={theaterList:null,code:-1,info:{},guideMaps:[],viewGuideMapIdx:0,guideMapOn:!1,showDateList:[],movieInfo:{},screenInfo:{},timeTable:{}},a.viewGuideMap=a.viewGuideMap.bind(Object(p.a)(a)),a.getTheaterDetail=a.getTheaterDetail.bind(Object(p.a)(a)),a.getScreenList=a.getScreenList.bind(Object(p.a)(a)),a.getShowDateList=a.getShowDateList.bind(Object(p.a)(a)),a.getShowTimeList=a.getShowTimeList.bind(Object(p.a)(a)),a.changeTheater=a.changeTheater.bind(Object(p.a)(a)),a.changeViewGuideMap=a.changeViewGuideMap.bind(Object(p.a)(a)),a.changeDate=a.changeDate.bind(Object(p.a)(a)),a.goMovieDetailPage=a.goMovieDetailPage.bind(Object(p.a)(a)),a.bookTicket=a.bookTicket.bind(Object(p.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;C.a.get("".concat(O,"/theater/theaterList")).then(function(t){var a=t.data,n=a.ok,i=a.data;if(n){var c={},r=!0,l=!1,o=void 0;try{for(var s,d=i[Symbol.iterator]();!(r=(s=d.next()).done);r=!0){var m=s.value,u=m.location,h=m.code,v=m.name;c[u]?c[u].push({code:h,name:v}):c[u]=[{code:h,name:v}]}}catch(f){l=!0,o=f}finally{try{r||null==d.return||d.return()}finally{if(l)throw o}}var p=c[Object.keys(c)[0]][0].code;e.setState({code:p,theaterList:c}),e.getTheaterDetail(p),e.getScreenList(p),e.getShowDateList(p)}else e.props.errorAlert(t.data.message)}).catch(function(e){}),C.a.get("".concat(O,"/theater/movieInfo")).then(function(t){var a=t.data,n=a.ok,i=a.data;if(n){var c={},r=!0,l=!1,o=void 0;try{for(var s,d=i[Symbol.iterator]();!(r=(s=d.next()).done);r=!0){var m=s.value,u=m.code,h=m.title,v=m.run_time,p=m.open,f=m.watch_grade;c[u]={title:h,runTime:v,open:p.substr(0,4)+"."+p.substr(4,2)+"."+p.substr(6,2),watchGrade:f}}}catch(b){l=!0,o=b}finally{try{r||null==d.return||d.return()}finally{if(l)throw o}}e.setState({movieInfo:c})}}).catch(function(e){})}},{key:"getTheaterDetail",value:function(e){var t=this;C.a.get("".concat(O,"/theater/theaterDetail?theaterCode=").concat(e)).then(function(a){var n=a.data,i=n.ok,c=n.data;if(i){var r=c.info,l=c.guideMaps;t.setState({code:e,info:r,guideMaps:l})}}).catch(function(e){})}},{key:"getScreenList",value:function(e){var t=this;C.a.get("".concat(O,"/theater/ScreenList?theaterCode=").concat(e)).then(function(e){var a=e.data,n=a.ok,i=a.data;if(n){var c={},r=!0,l=!1,o=void 0;try{for(var s,d=i[Symbol.iterator]();!(r=(s=d.next()).done);r=!0){var m=s.value,u=m.code,h=m.name,v=m.total_seats;c[u]={name:h,totalSeats:v}}}catch(p){l=!0,o=p}finally{try{r||null==d.return||d.return()}finally{if(l)throw o}}t.setState({screenInfo:c})}}).catch(function(e){})}},{key:"getShowDateList",value:function(e){var t=this;C.a.get("".concat(O,"/theater/showDateList?theaterCode=").concat(e)).then(function(a){var n=a.data,i=n.ok,c=n.data;i&&(t.setState({showDateList:c}),c.length&&t.getShowTimeList(e,c[0].date))}).catch(function(e){})}},{key:"getShowTimeList",value:function(e,t){var a=this;C.a.get("".concat(O,"/theater/showTimeList?theaterCode=").concat(e,"&date=").concat(t)).then(function(e){var t=e.data,n=t.ok,i=t.data;if(n){var c={},r=!0,l=!1,o=void 0;try{for(var s,d=i[Symbol.iterator]();!(r=(s=d.next()).done);r=!0){var m=s.value,u=m.movie_code,h=m.screen_code,v=m.start,p=m.booked_seats;void 0===c[u]&&(c[u]={}),void 0===c[u][h]&&(c[u][h]=[]),c[u][h].push({start:v,bookedSeats:p})}}catch(f){l=!0,o=f}finally{try{r||null==d.return||d.return()}finally{if(l)throw o}}a.setState({timeTable:c})}}).catch(function(e){})}},{key:"changeTheater",value:function(e){this.state.code!==e&&(this.setState({code:e,info:{},guideMaps:[],viewGuideMapIdx:0,guideMapOn:!1,showDateList:[],screenInfo:{},timeTable:{}}),this.getTheaterDetail(e),this.getScreenList(e),this.getShowDateList(e))}},{key:"changeViewGuideMap",value:function(e){this.setState({viewGuideMapIdx:e})}},{key:"changeDate",value:function(e){this.getShowTimeList(this.state.code,e)}},{key:"goMovieDetailPage",value:function(e){this.props.history.push("/movie/detail/".concat(e))}},{key:"viewGuideMap",value:function(){this.setState({guideMapOn:!this.state.guideMapOn})}},{key:"bookTicket",value:function(e,t,a,n,i,c,r){this.props.history.push({pathname:"/ticket",state:{movieCode:e,movieName:t,location:a,theaterCode:n,theaterName:i,screenCode:c,start:r.slice(0,19).replace("T"," ")}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.theaterList,n=t.code,c=t.info,r=t.guideMaps,l=t.viewGuideMapIdx,o=t.guideMapOn,s=t.showDateList,d=t.movieInfo,m=t.screenInfo,u=t.timeTable;return null===a?i.a.createElement("div",{id:"theater-page"},"\ubd88\ub7ec\uc624\ub294 \uc911"):i.a.createElement("div",{id:"theater-page",className:"flex-c"},i.a.createElement("div",{id:"theater-list",className:"flex-r"},a&&Object.keys(a).map(function(t,n){return i.a.createElement("div",{id:"location",key:n},i.a.createElement("div",{id:"label"},t),i.a.createElement("div",{id:"list",className:"flex-r"},a[t]&&a[t].map(function(t){var a=t.code,n=t.name;return i.a.createElement("div",{id:"item",key:a,onClick:function(){return e.changeTheater(a)}},n)})))})),c&&i.a.createElement("div",{id:"theater-info",className:"flex-c"},i.a.createElement("div",{id:"name"},"\uc601\ud654\uad00 ",c.location," - ",c.name),i.a.createElement("div",{id:"address"},"\uc8fc\uc18c - ",c.address),i.a.createElement("div",{id:"phone"},"\ubc88\ud638 - ",c.phone)),i.a.createElement("div",{id:"guide-map",className:"flex-c center"},i.a.createElement("div",{id:"title"},"\uc601\ud654\uad00 \uce35\ubcc4 \uc548\ub0b4\ub3c4"),i.a.createElement("div",{id:"content",className:"flex-c"+(o?" active":"")},i.a.createElement("div",{id:"floors",className:"flex-r"},r.map(function(t,a){var n=t.comment;return i.a.createElement("div",{id:"floor",key:a,onClick:function(){return e.changeViewGuideMap(a)}},n)})),r.map(function(e,t){var a=e.img;return i.a.createElement("img",{id:"img",src:"".concat(y,"/").concat(a),key:t,active:l===t?"true":"false"})})),i.a.createElement("div",{id:"view",onClick:this.viewGuideMap},o?"\ub2eb\uae30":"\ubcf4\uae30")),i.a.createElement("div",{id:"movies",className:"flex-c"},i.a.createElement("div",{id:"title"},"\uc0c1\uc601\uc2dc\uac04\ud45c"),!s.length&&i.a.createElement("div",{id:"no-date"},i.a.createElement("img",{src:"/no-list.svg"}),i.a.createElement("div",null,"\uc544\uc27d\uac8c\ub3c4 \uc5c6\ub124\uc694...")),i.a.createElement("div",{id:"day-list",className:"flex-r"},i.a.createElement("div",{id:"day-wrap",className:"flex-r"},s.map(function(t,a){var n=t.date;return i.a.createElement("div",{id:"day",name:n,key:a,onClick:function(){return e.changeDate(n)}},n.slice(5,7),"\uc6d4 ",n.slice(8,10),"\uc77c")}))),Object.keys(u).map(function(t){var a=d[t],r=a.title,l=a.runTime,o=a.open,s=a.watchGrade,h=R[s];return i.a.createElement("div",{id:"movie",key:t,className:"flex-c ".concat(h)},i.a.createElement("div",{id:"info",className:"flex-r"},i.a.createElement("div",{id:"watch-grade",className:h}),i.a.createElement("div",{id:"name",onClick:function(){return e.goMovieDetailPage(t)}},r),i.a.createElement("div",{id:"runtime"},l,"\ubd84"),i.a.createElement("div",{id:"open"},o," \uac1c\ubd09")),Object.keys(u[t]).map(function(a){var l=m[a],o=l.name,s=l.totalSeats,d=u[t][a];return i.a.createElement("div",{id:"content",key:a,className:"flex-c"},i.a.createElement("div",{id:"screen-info",className:"flex-r"},i.a.createElement("div",{id:"screen-name"},o),i.a.createElement("div",{id:"total-seats"},"\ucd1d ",s,"\uc11d")),i.a.createElement("div",{id:"time-list",className:"flex-r"},d.map(function(l){var o=l.start,d=l.bookedSeats;return i.a.createElement("div",{id:"item",key:o,onClick:function(){return e.bookTicket(t,r,c.location,n,c.name,a,o)},className:"flex-c center"},i.a.createElement("div",{id:"time"},o.slice(11,16)),i.a.createElement("div",{id:"seats"},s-d,"\uc11d"))})))}))})))}}]),t}(n.Component);var _={successAlert:A.success,errorAlert:A.error},P=Object(l.b)(void 0,_)(G),U=a(12),V=a(43),J=(a(78),{"\uccad\uc18c\ub144\uad00\ub78c\ubd88\uac00":"adult","15\uc138\uc774\uc0c1\uad00\ub78c\uac00":"fifteen","12\uc138\uc774\uc0c1\uad00\ub78c\uac00":"twelve","\uc804\uccb4\uad00\ub78c\uac00":"all"}),F=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={selectedMovie:null,selectedMovieTitle:null,selectedLocation:null,selectedTheater:null,selectedTheaterName:null,selectedScreen:null,selectedDate:null,selectedTime:null,movieList:[],locationList:[],theaterList:[],dateList:[],screenTimeList:{},screenInfo:{},seatList:[],bookedSeat:{},selectedSeat:Object(k.b)(),totalPrice:0,step:0,payModal:!1,ticketData:{}},a.changeMovie=a.changeMovie.bind(Object(p.a)(a)),a.changeLocation=a.changeLocation.bind(Object(p.a)(a)),a.changeTheater=a.changeTheater.bind(Object(p.a)(a)),a.handleReset=a.handleReset.bind(Object(p.a)(a)),a.handleStep=a.handleStep.bind(Object(p.a)(a)),a.handlePayModal=a.handlePayModal.bind(Object(p.a)(a)),a.requestPay=a.requestPay.bind(Object(p.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;C.a.get("".concat(O,"/movie/movieList")).then(function(t){var a=t.data,n=a.ok,i=a.data;if(n){var c=[],r=!0,l=!1,o=void 0;try{for(var s,d=i[Symbol.iterator]();!(r=(s=d.next()).done);r=!0){var m=s.value,u=m.code,h=m.title,v=m.watch_grade;c.push({code:u,title:h,watchGrade:J[v]})}}catch(p){l=!0,o=p}finally{try{r||null==d.return||d.return()}finally{if(l)throw o}}e.setState({movieList:c})}}).catch(function(e){});var t=this.props.location.state;if(void 0!==t){var a=t.movieCode,n=t.movieName,i=t.location,c=t.theaterCode,r=t.theaterName,l=t.screenCode,o=t.start;this.changeMovie(a,n).then(function(){void 0!==i&&e.changeLocation(i).then(function(){void 0!==c&&e.changeTheater(c,r).then(function(){e.changeDate(o.slice(0,10)).then(function(){e.changeTime(l,o)})})})})}}},{key:"changeMovie",value:function(e,t){var a=this;if(this.state.selectedMovie!==e)return new Promise(function(n,i){a.setState({selectedMovie:e,selectedMovieTitle:t,selectedLocation:null,selectedTheater:null,selectedScreen:null,selectedDate:null,selectedTime:null,locationList:[],theaterList:[],dateList:[],screenTimeList:{}}),C.a.get("".concat(O,"/ticket/movieLocationList?movieCode=").concat(e)).then(function(e){var t=e.data,i=t.ok,c=t.data;i&&a.setState({locationList:c}),n()}).catch(function(e){i()})})}},{key:"changeLocation",value:function(e){var t=this,a=this.state,n=a.selectedMovie;if(a.selectedLocation!==e)return new Promise(function(a,i){t.setState({selectedLocation:e,selectedTheater:null,selectedDate:null,selectedTime:null,theaterList:[],dateList:[],screenTimeList:{}}),C.a.get("".concat(O,"/ticket/movieTheaterList?location=").concat(e,"&movieCode=").concat(n)).then(function(e){var n=e.data,i=n.ok,c=n.data;i&&t.setState({theaterList:c}),a()}).catch(function(e){i()})})}},{key:"changeTheater",value:function(e,t){var a=this,n=this.state,i=n.selectedTheater,c=n.selectedMovie;if(i!==e)return new Promise(function(n,i){a.setState({selectedTheater:e,selectedTheaterName:t,selectedDate:null,selectedTime:null,dateList:[],screenTimeList:{}}),C.a.get("".concat(O,"/ticket/movieDateList?theaterCode=").concat(e,"&movieCode=").concat(c)).then(function(e){var t=e.data,n=t.ok,i=t.data;n&&a.setState({dateList:i})}).catch(function(e){}),C.a.get("".concat(O,"/theater/ScreenList?theaterCode=").concat(e)).then(function(e){var t=e.data,i=t.ok,c=t.data;if(i){var r={},l=!0,o=!1,s=void 0;try{for(var d,m=c[Symbol.iterator]();!(l=(d=m.next()).done);l=!0){var u=d.value,h=u.code,v=u.name,p=u.row,f=u.col,b=u.total_seats;r[h]={name:v,row:p,col:f,totalSeats:b}}}catch(g){o=!0,s=g}finally{try{l||null==m.return||m.return()}finally{if(o)throw s}}a.setState({screenInfo:r})}n()}).catch(function(e){i()})})}},{key:"changeDate",value:function(e){var t=this,a=this.state,n=a.selectedTheater,i=a.selectedMovie;if(a.selectedDate!==e)return new Promise(function(a,c){t.setState({selectedDate:e}),C.a.get("".concat(O,"/ticket/movieTimeList?theaterCode=").concat(n,"&movieCode=").concat(i,"&date=").concat(e)).then(function(e){var n=e.data,i=n.ok,c=n.data;if(i){var r={},l=!0,o=!1,s=void 0;try{for(var d,m=c[Symbol.iterator]();!(l=(d=m.next()).done);l=!0){var u=d.value,h=u.screen_code,v=u.start,p=u.booked_seats;void 0===r[h]&&(r[h]=[]),r[h].push({start:v,bookedSeats:p})}}catch(f){o=!0,s=f}finally{try{l||null==m.return||m.return()}finally{if(o)throw s}}t.setState({screenTimeList:r}),a()}}).catch(function(e){c()})})}},{key:"changeTime",value:function(e,t){this.setState({selectedScreen:e,selectedTime:t})}},{key:"handleReset",value:function(){this.setState({selectedMovie:null,selectedLocation:null,selectedTheater:null,selectedDate:null,selectedTime:null,locationList:[],theaterList:[],dateList:[],screenTimeList:{},screenInfo:{}})}},{key:"handleStep",value:function(){var e=this,t=this.state,a=t.selectedTheater,n=t.selectedScreen,i=t.selectedMovie,c=t.selectedTime,r=t.step;this.setState({step:r?0:1}),0==r&&(C.a.get("".concat(O,"/theater/screenSeatList?theaterCode=").concat(a,"&screenCode=").concat(n)).then(function(t){var a=t.data,n=a.ok,i=a.data;n&&e.setState({seatList:i})}).catch(function(e){}),C.a.get("".concat(O,"/ticket/bookedSeatList?theaterCode=").concat(a,"&screenCode=").concat(n,"&movieCode=").concat(i,"&start=").concat(c)).then(function(t){var a=t.data,n=a.ok,i=a.data;if(n){var c={},r=!0,l=!1,o=void 0;try{for(var s,d=i[Symbol.iterator]();!(r=(s=d.next()).done);r=!0){c[s.value.seat_code]=!0}}catch(m){l=!0,o=m}finally{try{r||null==d.return||d.return()}finally{if(l)throw o}}e.setState({bookedSeat:c})}}).catch(function(e){}))}},{key:"handlePayModal",value:function(){var e=this.state,t=e.totalPrice,a=e.payModal;t?this.setState({payModal:!a}):this.props.errorAlert("\uc88c\uc11d\uc744 \uc120\ud0dd\ud558\uc138\uc694.")}},{key:"selectSeat",value:function(e,t){var a=this,n=this.state,i=n.selectedTheater,c=n.selectedScreen,r=n.selectedMovie,l=n.selectedTime,o=n.selectedSeat,s=n.totalPrice,d=n.bookedSeat,m=o.get(e);void 0===m?C.a.get("".concat(O,"/ticket/selectSeat?theaterCode=").concat(i,"&screenCode=").concat(c,"&movieCode=").concat(r,"&start=").concat(l,"&seatCode=").concat(e)).then(function(n){var i=n.data,c=i.ok,r=i.message,l=i.data;if(c){var m=l.price;a.setState({selectedSeat:o.set(l.seatCode,{type:t.toLowerCase(),price:m}),totalPrice:s+m});var u=a.listRef.scrollHeight-a.listRef.clientHeight;a.listRef.scrollTop=u>0?u:0}else a.setState({bookedSeat:Object(V.a)({},d,Object(U.a)({},e,!0))}),a.props.errorAlert(r)}).catch(function(e){}):this.setState({selectedSeat:o.delete(e),totalPrice:s-m.price})}},{key:"requestPay",value:function(){var e=this,t=this.state,a={theaterCode:t.selectedTheater,screenCode:t.selectedScreen,movieCode:t.selectedMovie,start:t.selectedTime,selectedSeat:t.selectedSeat.toJS()};C.a.post("".concat(O,"/ticket/pay"),a).then(function(t){var a=t.data,n=a.ok,i=a.data;if(n){var c=i.ticketNumber,r=i.price;e.setState({step:2,ticketData:{ticketNumber:c,totalPrice:r}})}else e.props.errorAlert(t.data.message)}).catch(function(e){})}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedMovie,c=t.selectedMovieTitle,r=t.selectedLocation,l=t.selectedTheater,o=t.selectedTheaterName,s=t.selectedScreen,d=t.selectedDate,m=t.selectedTime,u=t.step,h=t.movieList,v=t.locationList,p=t.theaterList,f=t.dateList,b=t.screenTimeList,g=t.screenInfo,E=t.seatList,C=t.bookedSeat,k=t.selectedSeat,y=t.totalPrice,O=t.payModal,S=k.toJS();if(0==u)return i.a.createElement("div",{id:"ticket-page",className:"flex-c"},i.a.createElement("div",{id:"ticket-option",className:"flex-r"},i.a.createElement("div",{id:"movie-list",className:"flex-c"},i.a.createElement("div",{id:"header",className:"flex-c"},i.a.createElement("div",{id:"label"},"\uc601\ud654")),i.a.createElement("div",{id:"movie",className:"flex-c"},h.map(function(t){var n=t.code,c=t.title,r=t.watchGrade;return i.a.createElement("div",{id:"item",key:n,className:"flex-r",onClick:function(){return e.changeMovie(n,c)},active:a===n?"true":"false"},i.a.createElement("div",{id:"watch-grade",className:r}),i.a.createElement("div",{id:"title"},c))}))),i.a.createElement("div",{id:"location-list",className:"flex-c"},i.a.createElement("div",{id:"header"},i.a.createElement("div",{id:"label"},"\uc9c0\uc5ed")),i.a.createElement("div",{id:"location",className:"flex-c"},v.map(function(t,a){var n=t.location,c=t.count;return i.a.createElement("div",{id:"item",key:a,onClick:function(){return e.changeLocation(n)},active:r===n?"true":"false"},n," (",c,")")}),a&&!v.length&&i.a.createElement("div",{id:"empty"},i.a.createElement("img",{src:"./emptybox.svg"}),i.a.createElement("div",null,"\uc77c\uc815 \uc5c6\uc74c")))),i.a.createElement("div",{id:"theater-list",className:"flex-c"},i.a.createElement("div",{id:"header"},i.a.createElement("div",{id:"label"},"\uc601\ud654\uad00")),i.a.createElement("div",{id:"theater"},p.map(function(t){var a=t.code,n=t.name;return i.a.createElement("div",{id:"item",key:a,onClick:function(){return e.changeTheater(a,n)},active:l===a?"true":"false"},n)}))),i.a.createElement("div",{id:"select-time"},i.a.createElement("div",{id:"wrap",className:"flex-c"},i.a.createElement("div",{id:"date-list",className:"flex-c"},i.a.createElement("div",{id:"header"},i.a.createElement("div",{id:"label"},"\ub0a0\uc9dc")),i.a.createElement("div",{id:"date",className:"flex-r"},f.map(function(t,a){var n=t.date;return i.a.createElement("div",{id:"item",key:a,onClick:function(){return e.changeDate(n)},active:d===n?"true":"false"},n.slice(5,10).replace("-","\uc6d4 ")+"\uc77c")}))),i.a.createElement("div",{id:"screen-list",className:"flex-c"},Object.keys(b).map(function(t){var a=g[t],n=a.name,c=a.totalSeats;return i.a.createElement("div",{id:"screen",key:t},i.a.createElement("div",{id:"name"},n),i.a.createElement("div",{id:"time-list"},b[t].map(function(a,n){var r=a.start,l=a.bookedSeats;return i.a.createElement("div",{id:"time",key:n,onClick:function(){return e.changeTime(t,r)},active:m===r?"true":"false"},i.a.createElement("span",{id:"start"},r.slice(11,16)),i.a.createElement("span",{id:"remain"},c-l,"\uc11d"))})))}))))),i.a.createElement("div",{id:"buttons",className:"flex-r"},i.a.createElement("div",{id:"reset-btn",onClick:this.handleReset},"\ucd08\uae30\ud654"),m?i.a.createElement("div",{id:"next-btn",onClick:function(){return e.handleStep()}},"\uc88c\uc11d\uc120\ud0dd"):i.a.createElement("div",{id:"disable-btn"},"\uc88c\uc11d\uc120\ud0dd")));if(1==u)return i.a.createElement(n.Fragment,null,i.a.createElement("div",{id:"seat-select-page",className:"flex-c"},i.a.createElement("div",{id:"summary",className:"flex-r"},i.a.createElement("div",{id:"selected-info"},i.a.createElement("div",{id:"movie"},c),i.a.createElement("div",{id:"theater"},r," - ",o),i.a.createElement("div",{id:"screen"},g[s].name),i.a.createElement("div",{id:"time"},m.slice(0,16))),i.a.createElement("div",{id:"selected-seat",ref:function(t){return e.listRef=t}},Object.keys(S).map(function(e){var t=S[e],a=t.type,n=t.price;return i.a.createElement("div",{id:"info",key:e,className:"flex-r center"},i.a.createElement("div",{id:"seat",className:"flex-r center ".concat(a)},i.a.createElement("div",{id:"position"},e),i.a.createElement("div",{id:"type"},a)),i.a.createElement("div",{id:"price"},"\u20a9",n))}))),i.a.createElement("div",{id:"screen-seat"},E.length?i.a.createElement("div",{id:"wrap",className:"flex-c center"},i.a.createElement("div",{id:"screen"},"SCREEN"),i.a.createElement("div",{id:"seats",style:{gridTemplateRows:"repeat(".concat(g[s].row,", 60px)"),gridTemplateColumns:"repeat(".concat(g[s].col,", 60px)")}},E.map(function(t){var a=t.x,n=t.y,c=t.code,r=t.grade;return i.a.createElement("div",{id:"seat",key:c,style:{gridRow:"".concat(a," / ").concat(a+1),gridColumn:"".concat(n," / ").concat(n+1)},onClick:function(){return e.selectSeat(c,r)},className:(C[c]?"disabled":r.toLowerCase())+(void 0!==S[c]?" selected":"")},c)}))):i.a.createElement("div",{id:"wrap",className:"flex-c center"},"\ubd88\ub7ec\uc624\ub294 \uc911...")),i.a.createElement("div",{id:"result",className:"flex-r"},i.a.createElement("div",{id:"total-price"},"\ucd1d ",i.a.createElement("span",{id:"won"},y.toLocaleString()),"\uc6d0"),i.a.createElement("div",{id:"buttons",className:"flex-r"},Object.keys(S).length?i.a.createElement("div",{id:"pay-btn",onClick:this.handlePayModal},"\uacb0\uc81c\ud558\uae30"):i.a.createElement("div",{id:"disable-btn"},"\uacb0\uc81c\ud558\uae30")))),O&&i.a.createElement("div",{id:"pay-modal",className:"flex-c center"},i.a.createElement("div",{id:"wrap",className:"flex-c"},i.a.createElement("div",{id:"header"},"\ud734\ub300\ud3f0 \uacb0\uc81c"),i.a.createElement("div",{id:"fields"},i.a.createElement("div",{id:"label"},"\uc774\ub984"),i.a.createElement("input",{id:"input-name",autoComplete:"off"}),i.a.createElement("div",{id:"label"},"\uc8fc\ubbfc\ub4f1\ub85d\ubc88\ud638"),i.a.createElement("div",{id:"rrn",className:"flex-r"},i.a.createElement("input",{id:"input-front",maxLength:"6",autoComplete:"off"}),i.a.createElement("div",{id:"segment"},"-"),i.a.createElement("input",{id:"input-back",maxLength:"1"}),i.a.createElement("div",{id:"secret"},"******")),i.a.createElement("div",{id:"label"},"\ud734\ub300\ud3f0 \uc804\ud654\ubc88\ud638 ('-' \uc81c\uc678)"),i.a.createElement("input",{id:"input-phone",maxLength:"11",autoComplete:"off"})),i.a.createElement("div",{id:"price"},"\u20a9",y.toLocaleString()),i.a.createElement("div",{id:"buttons",className:"flex-r"},i.a.createElement("div",{id:"cancel-btn",onClick:this.handlePayModal},"\ucde8\uc18c"),i.a.createElement("div",{id:"pay-btn",onClick:this.requestPay},"\uacb0\uc81c")))));var j=this.state.ticketData,w=j.ticketNumber,x=j.totalPrice;return i.a.createElement("div",{id:"success-page",className:"flex-c center"},i.a.createElement("div",{id:"success-text"},"\uc608\ub9e4 \uc644\ub8cc"),i.a.createElement("div",{id:"ticket-number-label"},"\ud2f0\ucf13 \uc77c\ub828\ubc88\ud638"),i.a.createElement("div",{id:"ticket-number"},w),i.a.createElement("div",{id:"total-price-text"},"\uacb0\uc81c\uae08\uc561"),i.a.createElement("div",{id:"total-price"},"\u20a9",x))}}]),t}(n.Component);var W={successAlert:A.success,errorAlert:A.error},H=Object(l.b)(void 0,W)(F),B=function(e){var t=e.link,a=e.img,n=e.text;return e.disabled?i.a.createElement("div",{id:"item",className:"flex-c center",disabled:!0},i.a.createElement("img",{id:"img",src:a,alt:n}),i.a.createElement("span",{id:"text"},n)):i.a.createElement(b.b,{to:t},i.a.createElement("div",{id:"item",className:"flex-c center"},i.a.createElement("img",{id:"img",src:a,alt:n}),i.a.createElement("span",{id:"text"},n),i.a.createElement("div",{id:"on"})))},z=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{id:"menu"},i.a.createElement(B,{link:"/admin/branch",img:"/cinema.svg",text:"\uadf9\uc7a5 \uad00\ub9ac"}),i.a.createElement(B,{link:"/admin/movie",img:"/cinema.svg",text:"\uc601\ud654"}),i.a.createElement(B,{link:"/admin/theater",img:"/cinema.svg",text:"\uc0c1\uc601\uad00"}))}}]),t}(n.Component),Y=(a(79),Object(k.c)({floor:"",comment:"",img:null})),q=Object(k.c)({code:"",location:"",name:"",address:"",phone:"",guideMaps:Object(k.a)()}),K=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={data:q()},a.handleChange=a.handleChange.bind(Object(p.a)(a)),a.handleGuideMapChange=a.handleGuideMapChange.bind(Object(p.a)(a)),a.addGuideMap=a.addGuideMap.bind(Object(p.a)(a)),a.deleteGuideMap=a.deleteGuideMap.bind(Object(p.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value,i=this.state.data;this.setState({data:i.set(a,n)})}},{key:"handleGuideMapChange",value:function(e,t){var a=this,n=e.target,i=n.name,c=n.value,r=n.files,l=this.state.data;if(r){var o=new FormData;return o.append("file",r[0]),void C.a.post("".concat(O,"/admin/branch/uploadImage"),o).then(function(e){a.setState({data:l.setIn(["guideMaps",t,i],e.data.path)})}).catch(function(e){a.setState({data:l.setIn(["guideMaps",t,i],"")})})}this.setState({data:l.setIn(["guideMaps",t,i],c)})}},{key:"addGuideMap",value:function(){var e=this.state.data;this.setState({data:e.set("guideMaps",e.guideMaps.push(Y()))})}},{key:"deleteGuideMap",value:function(e){var t=this.state.data;this.setState({data:t.deleteIn(["guideMaps",e])})}},{key:"handleSubmit",value:function(){var e=this,t=this.state.data.toJS();C.a.post("".concat(O,"/admin/branch/add"),t).then(function(t){var a=t.data,n=a.ok,i=a.message;n?(e.setState({data:q()}),e.props.successAlert("\uadf9\uc7a5 \ucd94\uac00 \uc131\uacf5")):e.props.errorAlert(i)}).catch(function(e){})}},{key:"render",value:function(){var e=this,t=this.state.data;return i.a.createElement("div",{id:"branch-add",className:"flex-c"},i.a.createElement("input",{type:"number",min:"0",name:"code",placeholder:"\uadf9\uc7a5 \uace0\uc720\ubc88\ud638",value:t.code,onChange:this.handleChange,autoComplete:"off"}),i.a.createElement("select",{id:"select",name:"location",value:t.location,onChange:this.handleChange},i.a.createElement("option",{value:""},"\uc9c0\uc5ed \uc120\ud0dd"),i.a.createElement("option",{value:"\uc11c\uc6b8"},"\uc11c\uc6b8"),i.a.createElement("option",{value:"\uacbd\uae30"},"\uacbd\uae30"),i.a.createElement("option",{value:"\uc778\ucc9c"},"\uc778\ucc9c"),i.a.createElement("option",{value:"\uac15\uc6d0"},"\uac15\uc6d0"),i.a.createElement("option",{value:"\ub300\uc804/\ucda9\uccad"},"\ub300\uc804/\ucda9\uccad"),i.a.createElement("option",{value:"\ub300\uad6c"},"\ub300\uad6c"),i.a.createElement("option",{value:"\ubd80\uc0b0/\uc6b8\uc0b0"},"\ubd80\uc0b0/\uc6b8\uc0b0"),i.a.createElement("option",{value:"\uacbd\uc0c1"},"\uacbd\uc0c1"),i.a.createElement("option",{value:"\uad11\uc8fc/\uc804\ub77c/\uc81c\uc8fc"},"\uad11\uc8fc/\uc804\ub77c/\uc81c\uc8fc")),i.a.createElement("input",{type:"text",name:"name",placeholder:"\uadf9\uc7a5 \uc774\ub984",value:t.name,onChange:this.handleChange,autoComplete:"off"}),i.a.createElement("input",{type:"text",name:"address",placeholder:"\uc8fc\uc18c",value:t.address,onChange:this.handleChange,autoComplete:"off"}),i.a.createElement("input",{type:"text",name:"phone",placeholder:"\uc804\ud654\ubc88\ud638",value:t.phone,onChange:this.handleChange,autoComplete:"off"}),i.a.createElement("div",{id:"guide-map"},i.a.createElement("div",{id:"list",className:"flex-c"},t.guideMaps.map(function(t,a){return i.a.createElement($,{key:a,value:t,idx:a,onChange:e.handleGuideMapChange,onDelete:e.deleteGuideMap})})),i.a.createElement("div",{id:"add-btn",onClick:this.addGuideMap},"\uce35 \ucd94\uac00")),i.a.createElement("div",{id:"submit",onClick:this.handleSubmit},"\uc81c\ucd9c"))}}]),t}(n.Component),$=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(a=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(i)))).state={showImg:!1},a.handleChange=function(e){a.props.onChange(e,a.props.idx)},a.deleteItem=function(){a.props.onDelete(a.props.idx)},a.handleImgView=function(){a.setState({showImg:!a.state.showImg})},a.uploadImg=function(){a.refs.fileRef.click()},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.value;return i.a.createElement("div",{id:"item",className:"flex-r"},i.a.createElement("input",{type:"number",name:"floor",value:e.floor,onChange:this.handleChange,placeholder:"\uce35",autoComplete:"off"}),i.a.createElement("input",{type:"text",name:"comment",value:e.comment,onChange:this.handleChange,placeholder:"\uc138\ubd80\uc0ac\ud56d",autoComplete:"off"}),i.a.createElement("div",{id:"img-btn",onClick:this.uploadImg},"\uc774\ubbf8\uc9c0 \ucd94\uac00"),e.img&&i.a.createElement("div",{id:"img-name",onClick:this.handleImgView},e.img),this.state.showImg&&i.a.createElement("div",{id:"img-view",className:"flex-c center"},i.a.createElement("img",{id:"img",src:"".concat(y,"/").concat(e.img)}),i.a.createElement("div",{id:"close-btn",onClick:this.handleImgView},"\uc774\ubbf8\uc9c0 \ub2eb\uae30")),i.a.createElement("input",{type:"file",name:"img",value:"",onChange:this.handleChange,ref:"fileRef",accept:"image/*"}),i.a.createElement("div",{id:"delete",onClick:this.deleteItem},"\uc0ad\uc81c"))}}]),t}(n.Component);var Q={successAlert:A.success,errorAlert:A.error},X=Object(l.b)(void 0,Q)(K),Z=(a(80),Object(k.c)({x:0,y:0,disable:!1,grade:"NORMAL"})),ee=Object(k.c)({theaterCode:"",screenCode:"",screenName:"",row:0,column:0,disabled:0,seats:Object(k.a)()}),te=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={data:ee()},a.handleChange=a.handleChange.bind(Object(p.a)(a)),a.handleCount=a.handleCount.bind(Object(p.a)(a)),a.handleSeat=a.handleSeat.bind(Object(p.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value,i=this.state.data;this.setState({data:i.set(a,n)})}},{key:"handleCount",value:function(e){var t=e.target.name,a=this.state.data,n=a.row,i=a.column,c=a.seats;if("row-plus"===t&&n<=25){c=c.push(Object(k.a)());for(var r=0;r<i;r++)c=c.setIn([n,r],Z({x:n+1,y:r+1}));this.setState({data:a.merge({row:n+1,seats:c})})}else if("row-minus"===t&&n>0)this.setState({data:a.merge({row:n-1,seats:c.pop()})});else if("col-plus"===t&&i<=29){for(var l=0;l<n;l++)c=c.setIn([l,i],Z({x:l+1,y:i+1}));this.setState({data:a.merge({column:i+1,seats:c})})}else if("col-minus"===t&&i>0){for(var o=0;o<n;o++)c=c.set(o,c.get(o).pop());this.setState({data:a.merge({column:i-1,seats:c})})}}},{key:"handleSeat",value:function(e,t,a){var n=this.state.data,i=n.disabled,c=n.seats;if("disable"===e){var r=c.getIn([t-1,a-1,e]);this.setState({data:n.merge({disabled:i+(r?-1:1),seats:c.setIn([t-1,a-1,e],!r)})})}else this.setState({data:n.set("seats",c.setIn([t-1,a-1,"grade"],e))})}},{key:"handleSubmit",value:function(){var e=this,t=this.state.data.toJS();C.a.post("".concat(O,"/admin/branch/screenAdd"),t).then(function(t){var a=t.data,n=a.ok,i=a.message;n?(e.setState({data:ee()}),e.props.successAlert(i)):e.props.errorAlert(i)}).catch(function(e){})}},{key:"render",value:function(){var e=this,t=this.state.data,a=t.theaterCode,n=t.screenCode,c=t.screenName,r=t.row,l=t.column,o=t.disabled,s=t.seats,d=r*l-o;return i.a.createElement("div",{id:"screen-manage",className:"flex-c"},i.a.createElement("div",{id:"setting",className:"flex-c"},i.a.createElement("input",{type:"text",name:"theaterCode",placeholder:"\uc601\ud654\uad00 \ucf54\ub4dc",value:a,onChange:this.handleChange}),i.a.createElement("input",{type:"text",name:"screenCode",placeholder:"\uc0c1\uc601\uad00 \ucf54\ub4dc",value:n,onChange:this.handleChange}),i.a.createElement("input",{type:"text",name:"screenName",placeholder:"\uc0c1\uc601\uad00 \uc774\ub984",value:c,onChange:this.handleChange}),i.a.createElement("div",{className:"flex-r"},i.a.createElement("div",null,"\ud589 ",r,"\xa0"),i.a.createElement("button",{name:"row-plus",onClick:this.handleCount},"\ucd94\uac00"),i.a.createElement("button",{name:"row-minus",onClick:this.handleCount},"\ube7c\uae30")),i.a.createElement("div",{className:"flex-r"},i.a.createElement("div",null,"\uc5f4 ",l,"\xa0"),i.a.createElement("button",{name:"col-plus",onClick:this.handleCount},"\ucd94\uac00"),i.a.createElement("button",{name:"col-minus",onClick:this.handleCount},"\ube7c\uae30"))),i.a.createElement("div",{id:"screen"},"SCREEN"),i.a.createElement("div",{id:"seats",className:"flex-c"},s.map(function(t,a){return i.a.createElement("div",{id:"row",className:"flex-r",key:a},t.map(function(t){var a=t.x,n=t.y,c=t.disable,r=t.grade,l="".concat(a,",").concat(n);return i.a.createElement("div",{id:"seat",key:l,className:"flex-c center"+(c?" disabled":" ".concat(r.toLowerCase()))},i.a.createElement("div",null,l),i.a.createElement("div",{onClick:function(t){return e.handleSeat("disable",a,n)}},"\ube44\ud65c\uc131"),i.a.createElement("div",{onClick:function(t){return e.handleSeat("NORMAL",a,n)}},"\uae30\ubcf8"),i.a.createElement("div",{onClick:function(t){return e.handleSeat("COUPLE",a,n)}},"\ucee4\ud50c"))}))})),i.a.createElement("div",{id:"total-seats"},"\ucd1d ",d," \uc88c\uc11d"),i.a.createElement("div",{id:"submit",onClick:this.handleSubmit},"\uc81c\ucd9c"))}}]),t}(n.Component);var ae={successAlert:A.success,errorAlert:A.error},ne=Object(l.b)(void 0,ae)(te),ie=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.match;return i.a.createElement(n.Fragment,null,i.a.createElement("div",{id:"sub-menu",className:"flex-r"},i.a.createElement(b.c,{id:"item",activeClassName:"active",exact:!0,to:"".concat(e.path)},"\uadf9\uc7a5 \ubaa9\ub85d"),i.a.createElement(b.c,{id:"item",activeClassName:"active",to:"".concat(e.path,"/add")},"\uadf9\uc7a5 \ucd94\uac00"),i.a.createElement(b.c,{id:"item",activeClassName:"active",to:"".concat(e.path,"/screen")},"\uc0c1\uc601\uad00 \uad00\ub9ac")),i.a.createElement("div",{id:"content"},i.a.createElement(g.d,null,i.a.createElement(g.b,{exact:!0,path:"".concat(e.path,"/add"),component:X}),i.a.createElement(g.b,{exact:!0,path:"".concat(e.path,"/screen"),component:ne}))))}}]),t}(n.Component),ce=(a(81),Object(k.c)({isExternalImg:!1,img:""})),re=Object(k.c)({code:"",title:"",titleEn:"",runTime:"",productYear:"",nation:"",open:"",synopsis:"",watchGrade:"",thumbnail:"",showStatus:!1,stillCuts:Object(k.a)()}),le=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={data:re()},a.handleChange=a.handleChange.bind(Object(p.a)(a)),a.uploadImg=a.uploadImg.bind(Object(p.a)(a)),a.handleThumbNailChange=a.handleThumbNailChange.bind(Object(p.a)(a)),a.handleStillCutChange=a.handleStillCutChange.bind(Object(p.a)(a)),a.addStillCut=a.addStillCut.bind(Object(p.a)(a)),a.deleteStillCut=a.deleteStillCut.bind(Object(p.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a.getKOFIC=a.getKOFIC.bind(Object(p.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value,i=t.checked,c=this.state.data;"showStatus"!==a?this.setState({data:c.set(a,n)}):this.setState({data:c.set(a,i)})}},{key:"uploadImg",value:function(){this.refs.thumbRef.click()}},{key:"handleThumbNailChange",value:function(e){var t=this,a=e.target,n=a.name,i=a.files,c=this.state.data;if(i){var r=new FormData;r.append("file",i[0]),C.a.post("".concat(O,"/admin/movie/uploadImage"),r).then(function(e){t.setState({data:c.set(n,e.data.path)})}).catch(function(e){t.setState({data:c.set(n,"")})})}}},{key:"handleStillCutChange",value:function(e,t){var a=this,n=e.target,i=n.name,c=n.value,r=n.checked,l=n.files,o=this.state.data;if(l){var s=new FormData;return s.append("file",l[0]),void C.a.post("".concat(O,"/admin/movie/uploadImage"),s).then(function(e){a.setState({data:o.setIn(["stillCuts",t,i],e.data.path)})}).catch(function(e){a.setState({data:o.setIn(["stillCuts",t,i],"")})})}"isExternalImg"!==i?this.setState({data:o.setIn(["stillCuts",t,i],c)}):this.setState({data:o.setIn(["stillCuts",t],{isExternalImg:r,img:""})})}},{key:"addStillCut",value:function(){var e=this.state.data;this.setState({data:e.set("stillCuts",e.stillCuts.push(ce()))})}},{key:"deleteStillCut",value:function(e){var t=this.state.data;this.setState({data:t.deleteIn(["stillCuts",e])})}},{key:"handleSubmit",value:function(){var e=this,t=this.state.data.toJS();t.synopsis=this.synopsisRef.innerHTML,C.a.post("".concat(O,"/admin/movie/add"),t).then(function(t){var a=t.data,n=a.ok,i=a.message;n?(e.setState({data:re()}),e.props.successAlert("\uc601\ud654 \ucd94\uac00 \uc131\uacf5")):e.props.errorAlert(i)}).catch(function(e){})}},{key:"getKOFIC",value:function(){var e=this,t=this.state.data.code;t?C.a.get("http://www.kobis.or.kr/kobisopenapi/webservice/rest/movie/searchMovieInfo.json?key=e49cf10a3a6701da65a899b7f789bc89&movieCd=".concat(t),{headers:{"Access-Control-Allow-Origin":"*"}}).then(function(t){var a=t.data.movieInfoResult.movieInfo,n=a.movieNm,i=a.movieNmEn,c=a.showTm,r=a.prdtYear,l=a.nations,o=a.openDt,s=a.audits,d=l[0].nationNm||"",m=s[0].watchGradeNm||"",u=e.state.data;u=u.merge({title:n,titleEn:i,runTime:c,productYear:r,nation:d,open:o,watchGrade:m}),e.setState({data:u})}).catch(function(e){}):this.props.errorAlert("\uc601\ud654 \ucf54\ub4dc \uc785\ub825")}},{key:"render",value:function(){var e=this,t=this.state.data;return i.a.createElement("div",{id:"movie-add",className:"flex-c"},i.a.createElement("div",{className:"flex-r"},i.a.createElement("input",{type:"number",min:"0",name:"code",placeholder:"\uc601\ud654 \uace0\uc720\ubc88\ud638",value:t.code,onChange:this.handleChange,autoComplete:"off"})),i.a.createElement("input",{type:"text",name:"title",placeholder:"\uc601\ud654 \uc81c\ubaa9",value:t.title,onChange:this.handleChange,autoComplete:"off"}),i.a.createElement("input",{type:"text",name:"titleEn",placeholder:"\uc601\ud654 \uc601\uc5b4 \uc81c\ubaa9",value:t.titleEn,onChange:this.handleChange,autoComplete:"off"}),i.a.createElement("input",{type:"number",min:"0",name:"runTime",placeholder:"\uc601\ud654 \ub7f0\ud0c0\uc784",value:t.runTime,onChange:this.handleChange,autoComplete:"off"}),i.a.createElement("input",{type:"text",name:"productYear",placeholder:"\uc601\ud654 \uc81c\uc791\ub144\ub3c4",value:t.productYear,onChange:this.handleChange,autoComplete:"off"}),i.a.createElement("input",{type:"text",name:"nation",placeholder:"\uc601\ud654 \uc81c\uc791\uad6d\uac00",value:t.nation,onChange:this.handleChange,autoComplete:"off"}),i.a.createElement("input",{type:"text",name:"open",placeholder:"\uc601\ud654 \uac1c\ubd09\uc77c",value:t.open,onChange:this.handleChange,autoComplete:"off"}),i.a.createElement("div",{id:"synopsis",ref:function(t){return e.synopsisRef=t},placeholder:"\uc601\ud654 \uc904\uac70\ub9ac",contentEditable:"true"}),i.a.createElement("input",{type:"text",name:"watchGrade",placeholder:"\uc601\ud654 \uad00\ub78c \ub4f1\uae09",value:t.watchGrade,onChange:this.handleChange,autoComplete:"off"}),i.a.createElement("div",{id:"set-thumb",className:"flex-c"},i.a.createElement("div",null,"\uc378\ub124\uc77c"),t.thumbnail&&i.a.createElement("img",{src:"".concat(y,"/").concat(t.thumbnail)}),i.a.createElement("div",{id:"thumb-btn",onClick:this.uploadImg},"\uc5c5\ub85c\ub4dc / \ubcc0\uacbd"),i.a.createElement("input",{type:"file",name:"thumbnail",value:"",onChange:this.handleThumbNailChange,ref:"thumbRef",accept:"image/*"})),i.a.createElement("div",null,i.a.createElement("input",{id:"status-checkbox",type:"checkbox",name:"showStatus",checked:t.showStatus,onChange:this.handleChange}),i.a.createElement("label",{htmlFor:"status-checkbox"},"\ud604\uc7ac \uc0c1\uc601\uc911")),i.a.createElement("div",{id:"still-cuts"},i.a.createElement("div",{id:"list",className:"flex-c"},t.stillCuts.map(function(t,a){return i.a.createElement(oe,{key:a,value:t,idx:a,onChange:e.handleStillCutChange,onDelete:e.deleteStillCut})})),i.a.createElement("div",{id:"add-btn",onClick:this.addStillCut},"\uc2a4\ud2f8\ucef7 \ucd94\uac00")),i.a.createElement("div",{id:"submit",onClick:this.handleSubmit},"\uc81c\ucd9c"))}}]),t}(n.Component),oe=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(a=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(i)))).state={showImg:!1},a.handleChange=function(e){a.props.onChange(e,a.props.idx)},a.deleteItem=function(){a.props.onDelete(a.props.idx)},a.handleImgView=function(){a.setState({showImg:!a.state.showImg})},a.uploadImg=function(){a.refs.fileRef.click()},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.value;return i.a.createElement("div",{id:"item",className:"flex-r"},i.a.createElement("input",{id:"type-check",type:"checkbox",name:"isExternalImg",checked:e.isExternalImg,onChange:this.handleChange}),i.a.createElement("label",null,"\uc678\ubd80 \uc774\ubbf8\uc9c0 URL"),e.isExternalImg?i.a.createElement("input",{type:"text",name:"img",value:e.img,onChange:this.handleChange,placeholder:"\uc774\ubbf8\uc9c0 URL",autoComplete:"off"}):i.a.createElement("div",{id:"img-btn",onClick:this.uploadImg},"\uc2a4\ud2f8\ucef7 \uc774\ubbf8\uc9c0 \ucd94\uac00"),e.img&&i.a.createElement("div",{id:"img-name",onClick:this.handleImgView},e.img),this.state.showImg&&i.a.createElement("div",{id:"img-view",className:"flex-c center"},i.a.createElement("img",{id:"img",src:e.isExternalImg?"".concat(e.img):"".concat(y,"/").concat(e.img)}),i.a.createElement("div",{id:"close-btn",onClick:this.handleImgView},"\uc774\ubbf8\uc9c0 \ub2eb\uae30")),i.a.createElement("input",{type:"file",name:"img",value:"",onChange:this.handleChange,ref:"fileRef",accept:"image/*"}),i.a.createElement("div",{id:"delete",onClick:this.deleteItem},"\uc0ad\uc81c"))}}]),t}(n.Component);var se={successAlert:A.success,errorAlert:A.error},de=Object(l.b)(void 0,se)(le),me=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).bookRate=a.bookRate.bind(Object(p.a)(a)),a.cumulative=a.cumulative.bind(Object(p.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"bookRate",value:function(){var e=this;C.a.get("".concat(O,"/admin/movie/bookRate")).then(function(t){var a=t.data,n=a.ok,i=a.message;n?e.props.successAlert("\uc608\ub9e4\uc728 \uc9d1\uacc4 \uc644\ub8cc"):e.props.errorAlert(i)}).catch(function(e){})}},{key:"cumulative",value:function(){var e=this;C.a.get("".concat(O,"/admin/movie/cumulative")).then(function(t){var a=t.data,n=a.ok,i=a.message;n?e.props.successAlert("\uad00\ub78c\uac1d \uc9d1\uacc4 \uc644\ub8cc"):e.props.errorAlert(i)}).catch(function(e){})}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{id:"book-rate",onClick:this.bookRate},"\uc608\ub9e4\uc728 \uc9d1\uacc4"),i.a.createElement("div",{id:"cumulative",onClick:this.cumulative},"\uad00\ub78c\uac1d \uc9d1\uacc4"))}}]),t}(n.Component);var ue={successAlert:A.success,errorAlert:A.error},he=Object(l.b)(void 0,ue)(me),ve=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.match;return i.a.createElement(n.Fragment,null,i.a.createElement("div",{id:"sub-menu",className:"flex-r"},i.a.createElement(b.c,{id:"item",activeClassName:"active",to:"".concat(e.path,"/add")},"\uc601\ud654 \ucd94\uac00"),i.a.createElement(b.c,{id:"item",activeClassName:"active",to:"".concat(e.path,"/statistics")},"\uc601\ud654 \ud1b5\uacc4")),i.a.createElement("div",{id:"content"},i.a.createElement(g.d,null,i.a.createElement(g.b,{path:"".concat(e.path,"/statistics"),component:he}),i.a.createElement(g.b,{exact:!0,path:"".concat(e.path,"/add"),component:de}))))}}]),t}(n.Component),pe=(a(82),Object(k.c)({theaterCode:"",screenCode:"",movieCode:"",date:"",hours:"0",minutes:"0"})),fe=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={curDate:"",theaterList:{},viewTheaterList:"",selectedTheater:"",screenList:[],timeList:[],movieList:[],data:pe()},a.handleTheater=a.handleTheater.bind(Object(p.a)(a)),a.handleTheaterCode=a.handleTheaterCode.bind(Object(p.a)(a)),a.handleScreen=a.handleScreen.bind(Object(p.a)(a)),a.handleChange=a.handleChange.bind(Object(p.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a.setTime=a.setTime.bind(Object(p.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"setTime",value:function(){var e=6e4*(new Date).getTimezoneOffset(),t=new Date(Date.now()-e).toISOString().slice(0,10),a=this.state.data;this.setState({curDate:t,data:a.set("date",t)})}},{key:"componentDidMount",value:function(){var e=this;this.setTime(),C.a.get("".concat(O,"/theater/theaterList")).then(function(t){var a=t.data,n=a.ok,i=a.data;if(n){var c={},r=!0,l=!1,o=void 0;try{for(var s,d=i[Symbol.iterator]();!(r=(s=d.next()).done);r=!0){var m=s.value,u=m.location,h=m.code,v=m.name;c[u]?c[u].push({code:h,name:v}):c[u]=[{code:h,name:v}]}}catch(p){l=!0,o=p}finally{try{r||null==d.return||d.return()}finally{if(l)throw o}}e.setState({theaterList:c})}else e.props.errorAlert(t.data.message)}).catch(function(e){}),C.a.get("".concat(O,"/movie/movieList")).then(function(t){var a=t.data,n=a.ok,i=a.data;n&&e.setState({movieList:i})}).catch(function(e){})}},{key:"handleTheater",value:function(e){this.setState({screenList:[],data:this.state.data.merge({screenCode:"",movieCode:this.state.data.movieCode})});var t=e.target,a=t.name,n=t.value;this.setState(Object(U.a)({},a,n))}},{key:"handleTheaterCode",value:function(e,t){var a=this;C.a.get("".concat(O,"/theater/screenList?theaterCode=").concat(e)).then(function(e){var t=e.data,n=t.ok,i=t.data;n&&a.setState({screenList:i||[]})}).catch(function(e){});var n=this.state,i=n.viewTheaterList,c=n.data;this.setState({selectedTheater:"".concat(i," - ").concat(t),timeList:[],data:c.merge({theaterCode:e,screenCode:""})})}},{key:"getTimeList",value:function(e,t,a){var n=this;C.a.get("".concat(O,"/admin/theater/movieTimeList?theaterCode=").concat(e,"&screenCode=").concat(t,"&date=").concat(a)).then(function(e){var t=e.data.ok;n.setState({timeList:t?e.data.data:[]})}).catch(function(e){})}},{key:"handleScreen",value:function(e){var t=e.target,a=t.name,n=t.value,i=this.state.data,c=i.theaterCode,r=i.date;n?this.getTimeList(c,n,r):this.setState({timeList:[]}),this.setState({data:i.set(a,n)})}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value,i=this.state.data;if("date"===a){var c=i.theaterCode,r=i.screenCode;this.getTimeList(c,r,n)}this.setState({data:i.set(a,n)})}},{key:"handleSubmit",value:function(){var e=this,t=this.state.data.toJS();C.a.post("".concat(O,"/admin/theater/movieTimeAdd"),t).then(function(t){var a=t.data,n=a.ok,i=a.message;n?(e.setState({curDate:"",viewTheaterList:"",selectedTheater:"",screenList:[],timeList:[],data:pe()}),e.setTime(),e.props.successAlert(i)):e.props.errorAlert(i)}).catch(function(e){})}},{key:"render",value:function(){var e=this,t=this.state,a=t.curDate,n=t.theaterList,c=t.viewTheaterList,r=t.selectedTheater,l=t.screenList,o=t.timeList,s=t.movieList,d=t.data,m=d.screenCode,u=d.movieCode,h=d.date,v=d.hours,p=d.minutes;return i.a.createElement("div",{id:"theater-movie-manage",className:"flex-c"},i.a.createElement("select",{name:"viewTheaterList",value:c,onChange:this.handleTheater},i.a.createElement("option",{value:""},"\uc601\ud654\uad00 \uc9c0\uc5ed \uc120\ud0dd"),n&&Object.keys(n).map(function(e,t){return i.a.createElement("option",{key:t,value:e},e)})),c&&i.a.createElement("div",{id:"theater-list",className:"flex-r"},n[c].map(function(t){var a=t.code,n=t.name;return i.a.createElement("div",{key:a,id:"theater",onClick:function(){return e.handleTheaterCode(a,n)}},n)})),r&&i.a.createElement("div",{id:"selected-theater"},"\uc120\ud0dd \uadf9\uc7a5 : ",r),r&&i.a.createElement("select",{name:"screenCode",value:m,onChange:this.handleScreen},i.a.createElement("option",{value:""},"\uc0c1\uc601\uad00 \uc120\ud0dd"),l&&l.map(function(e,t){var a=e.code,n=e.name,c=e.total_seats;return i.a.createElement("option",{key:t,value:a},n," - \ucd1d \uc88c\uc11d ",c)})),o&&i.a.createElement("div",{id:"time-list"},o.map(function(e,t){var a=e.start,n=e.end,c=new Date(a),r=new Date(n);return i.a.createElement("div",{key:t},"".concat(c.getUTCHours(),":").concat(c.getUTCMinutes())," - ","".concat(r.getUTCHours(),":").concat(r.getUTCMinutes()))})),i.a.createElement("select",{name:"movieCode",value:u,onChange:this.handleChange},i.a.createElement("option",{value:""},"\uc0c1\uc601\uc911\uc778 \uc601\ud654 \uc120\ud0dd"),s&&s.map(function(e,t){var a=e.code,n=e.title;return i.a.createElement("option",{key:t,value:a},n)})),i.a.createElement("div",{id:"start-text"},"\uc601\ud654 \uc2dc\uc791\uc2dc\uac04 \uc124\uc815 (\ub0a0\uc9dc \uc2dc\uac04 \ubd84)"),i.a.createElement("div",{className:"flex-r"},i.a.createElement("input",{type:"date",name:"date",min:a,value:h,onChange:this.handleChange}),i.a.createElement("input",{type:"number",name:"hours",min:"0",max:"23",value:v,onChange:this.handleChange}),i.a.createElement("input",{type:"number",name:"minutes",min:"0",max:"59",value:p,onChange:this.handleChange})),i.a.createElement("div",{id:"submit",onClick:this.handleSubmit},"\uc81c\ucd9c"))}}]),t}(n.Component);var be={successAlert:A.success,errorAlert:A.error},ge=Object(l.b)(void 0,be)(fe),Ee=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.match;return i.a.createElement(n.Fragment,null,i.a.createElement("div",{id:"sub-menu",className:"flex-r"},i.a.createElement(b.c,{id:"item",activeClassName:"active",exact:!0,to:"".concat(e.path)},"\ud648"),i.a.createElement(b.c,{id:"item",activeClassName:"active",to:"".concat(e.path,"/movieManage")},"\uc0c1\uc601\uad00 \uc601\ud654 \uad00\ub9ac")),i.a.createElement("div",{id:"content"},i.a.createElement(g.d,null,i.a.createElement(g.b,{exact:!0,path:"".concat(e.path,"/movieManage"),component:ge}))))}}]),t}(n.Component),Ce=(a(83),function(e){function t(e){return Object(m.a)(this,t),Object(h.a)(this,Object(v.a)(t).call(this,e))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.match;return i.a.createElement("div",{id:"admin-page",className:"flex-c center"},i.a.createElement(g.d,null,i.a.createElement(g.b,{exact:!0,path:e.path,component:z}),i.a.createElement(g.b,{path:"".concat(e.path,"/branch"),component:ie}),i.a.createElement(g.b,{path:"".concat(e.path,"/movie"),component:ve}),i.a.createElement(g.b,{path:"".concat(e.path,"/theater"),component:Ee})))}}]),t}(n.Component));var ke=Object(l.b)(void 0,void 0)(Ce),ye=(a(84),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={email:"",mileage:0,accMileage:0,grade:"",paymentInfo:[]},a.userInfo=a.userInfo.bind(Object(p.a)(a)),a.paymentInfo=a.paymentInfo.bind(Object(p.a)(a)),a.cancelBookTicket=a.cancelBookTicket.bind(Object(p.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.auth.toJS();this.setState({email:e.email}),this.userInfo(e.email),this.paymentInfo(e.email)}},{key:"cancelBookTicket",value:function(e){var t=this,a=this.props.auth.toJS(),n={email:a.email,serialNumber:e};C.a.post("".concat(O,"/user/cancelTicket"),n).then(function(e){var n=e.data,i=n.ok,c=n.message;i?(t.props.successAlert("\uc608\ub9e4\uac00 \ucde8\uc18c \ub418\uc5c8\uc2b5\ub2c8\ub2e4."),t.userInfo(a.email),t.paymentInfo(a.email)):t.props.errorAlert(c)}).catch(function(e){})}},{key:"userInfo",value:function(e){var t=this;C.a.get("".concat(O,"/user/userInfo?email=").concat(e)).then(function(e){var a=e.data,n=a.ok,i=a.data;if(n){var c=i.mileage,r=i.acc_mileage,l=i.grade;t.setState({mileage:c,accMileage:r,grade:l})}}).catch(function(e){})}},{key:"paymentInfo",value:function(e){var t=this;C.a.get("".concat(O,"/user/paymentInfo?email=").concat(e)).then(function(e){var a=e.data,n=a.ok,i=a.data;n&&t.setState({paymentInfo:i})}).catch(function(e){})}},{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.mileage,c=t.accMileage,r=t.grade,l=t.paymentInfo;return i.a.createElement("div",{id:"my-page",className:"flex-c"},i.a.createElement("div",{id:"my-info"},i.a.createElement("div",{id:"title"},"\ub0b4 \uc815\ubcf4"),i.a.createElement("div",{id:"info"},i.a.createElement("div",{id:"label"},"\uc774\uba54\uc77c"),i.a.createElement("div",{id:"value"},a)),i.a.createElement("div",{id:"info"},i.a.createElement("div",{id:"label"},"\ub9c8\uc77c\ub9ac\uc9c0"),i.a.createElement("div",{id:"value"},n)),i.a.createElement("div",{id:"info"},i.a.createElement("div",{id:"label"},"\ub204\uc801 \ub9c8\uc77c\ub9ac\uc9c0"),i.a.createElement("div",{id:"value"},c)),i.a.createElement("div",{id:"info"},i.a.createElement("div",{id:"label"},"\ub4f1\uae09"),i.a.createElement("div",{id:"value"},r))),i.a.createElement("div",{id:"payment"},i.a.createElement("div",{id:"title"},"\uacb0\uc81c\ub0b4\uc5ed"),l.map(function(t){var a=t.time,n=t.type,c=t.serial_number,r=t.price;return i.a.createElement("div",{id:"log",key:a,className:"flex-r"},i.a.createElement("div",{id:"time"},a.slice(0,16).replace("T"," ")),i.a.createElement("div",{id:"type"},n),i.a.createElement("div",{id:"serial-number"},c),i.a.createElement("div",{id:"price"},"\u20a9",r),i.a.createElement("div",{id:"cancel-btn",onClick:function(){return e.cancelBookTicket(c)}},"\uc608\ub9e4 \ucde8\uc18c"))})))}}]),t}(n.Component));var Oe={successAlert:A.success,errorAlert:A.error},Se=Object(l.b)(function(e){return{auth:e.auth}},Oe)(ye),je=(a(85),function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{id:"ericacinema-page",className:"flex-c center"},i.a.createElement("img",{id:"neon",src:"/main-neon.png"}))}}]),t}(n.Component)),we=(a(44),a(86),{signInWithToken:function(e){return new Promise(function(t,a){C.a.post("".concat(O,"/user/verify"),{token:e}).then(xe).then(Ne).then(function(a){C.a.defaults.headers.common.Authorization=e,t(a)}).catch(function(e){a(e)})})},signIn:function(e,t){return new Promise(function(a,n){C.a.post("".concat(O,"/user/login"),{email:e,pw:t}).then(xe).then(Ne).then(function(e){sessionStorage.setItem("user",JSON.stringify(e)),C.a.defaults.headers.common.Authorization=e.token,a(e)}).catch(function(e){n(e)})})},signOut:function(){sessionStorage.removeItem("user"),C.a.defaults.headers.common.Authorization=null}});function xe(e){return e.data}function Ne(e){return e.ok?e.data:Promise.reject("signin fail")}var Le={signInWithToken:function(e){return function(t){we.signInWithToken(e).then(function(e){var a;t((a=e,{type:D.SIGNIN_SUCCESS,payload:a}))},function(e){t(Te())})}},signIn:function(e,t){return function(a){we.signIn(e,t).then(function(e){var t;a((t=e,{type:D.SIGNIN_SUCCESS,payload:t}))},function(e){a(A.error("\ub85c\uadf8\uc778 \uc2e4\ud328. \uc5c6\ub294 \uacc4\uc815\uc774\uac70\ub098, \ud55c\uae00 / \uc5c9\uc5b4\ub97c \ud655\uc778\ud558\uc138\uc694."))})}},signOut:Te,signUp:function(){}};function Te(){return we.signOut(),{type:D.SIGNOUT}}a(87);var Ie=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={email:"",password:"",dropDownVisible:!1,submitted:!1},a.handleClick=a.handleClick.bind(Object(p.a)(a)),a.handleOutsideClick=a.handleOutsideClick.bind(Object(p.a)(a)),a.closeDropDown=a.closeDropDown.bind(Object(p.a)(a)),a.handleChange=a.handleChange.bind(Object(p.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleOutsideClick,!1)}},{key:"handleClick",value:function(){this.state.dropDownVisible?this.closeDropDown():(document.addEventListener("mousedown",this.handleOutsideClick,!1),this.setState({dropDownVisible:!0}))}},{key:"handleOutsideClick",value:function(e){this.node.contains(e.target)||this.closeDropDown()}},{key:"closeDropDown",value:function(){document.removeEventListener("mousedown",this.handleOutsideClick,!1),this.setState({email:"",password:"",dropDownVisible:!1,submitted:!1})}},{key:"handleChange",value:function(e){this.state.submitted&&this.setState({submitted:!1});var t=e.target,a=t.name,n=t.value;this.setState(Object(U.a)({},a,n))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0});var t=this.state,a=t.email,n=t.password;a&&n&&a&&n&&this.props.signIn(a,n)}},{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.password,c=t.submitted,r=this.state.dropDownVisible;return i.a.createElement("div",{id:"signin",ref:function(t){return e.node=t}},i.a.createElement("div",{id:"btn",onClick:this.handleClick},"\ub85c\uadf8\uc778"),r&&i.a.createElement("div",{id:"dropdown"},i.a.createElement("div",{id:"form"},i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("div",{id:"field"},i.a.createElement("input",{type:"email",name:"email",value:a,onChange:this.handleChange,placeholder:"\uc774\uba54\uc77c",autoComplete:"off"}),c&&!a&&i.a.createElement("div",{id:"warn"},i.a.createElement("span",{id:"message"},"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."))),i.a.createElement("div",{id:"field"},i.a.createElement("input",{type:"password",name:"password",value:n,onChange:this.handleChange,placeholder:"\ud328\uc2a4\uc6cc\ub4dc"}),c&&a&&!n&&i.a.createElement("div",{id:"warn"},i.a.createElement("span",{id:"message"},"\ud328\uc2a4\uc6cc\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."))),i.a.createElement("button",{id:"submit"},"\ub85c\uadf8\uc778")),i.a.createElement("div",{id:"footer"},i.a.createElement(b.b,{to:"/signup"},i.a.createElement("span",{id:"signup",onClick:this.closeDropDown},"Sign up for EricaCinema"))))))}}]),t}(n.Component),Me={alertError:A.error,signIn:Le.signIn},De=Object(l.b)(void 0,Me)(Ie),Ae=(a(88),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={email:"",password:"",dropDownVisible:!1,submitted:!1},a.handleClick=a.handleClick.bind(Object(p.a)(a)),a.handleOutsideClick=a.handleOutsideClick.bind(Object(p.a)(a)),a.closeDropDown=a.closeDropDown.bind(Object(p.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.auth.toJS();this.setState({email:e.email,name:e.name})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleOutsideClick,!1)}},{key:"handleClick",value:function(){this.state.dropDownVisible?this.closeDropDown():(document.addEventListener("mousedown",this.handleOutsideClick,!1),this.setState({dropDownVisible:!0}))}},{key:"handleOutsideClick",value:function(e){this.node.contains(e.target)||this.closeDropDown()}},{key:"closeDropDown",value:function(){document.removeEventListener("mousedown",this.handleOutsideClick,!1),this.setState({dropDownVisible:!1,submitted:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=(t.email,t.name),n=t.dropDownVisible;return i.a.createElement("div",{id:"profile",ref:function(t){return e.node=t}},i.a.createElement("div",{id:"outside",className:"flex-r center",onClick:this.handleClick},i.a.createElement("img",{id:"icon",src:"/profile.svg"}),i.a.createElement("div",{id:"name"},a," \ub2d8")),n&&i.a.createElement("div",{id:"dropdown"},i.a.createElement("div",{id:"wrap",className:"flex-c"},i.a.createElement(b.b,{to:"/mypage"},i.a.createElement("div",{id:"mypage-btn"},"\ub9c8\uc774\ud398\uc774\uc9c0")),i.a.createElement("div",{id:"segment-line"}),i.a.createElement("div",{id:"signout-btn",onClick:function(){return e.props.signOut()},className:"flex-r"},i.a.createElement("img",{src:"/signout.svg"}),i.a.createElement("div",{id:"text"},"\ub85c\uadf8\uc544\uc6c3")))))}}]),t}(n.Component));var Re={signOut:Le.signOut},Ge=Object(l.b)(function(e){return{auth:e.auth}},Re)(Ae),_e=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.auth.toJS();return i.a.createElement(n.Fragment,null,e.isSigned?i.a.createElement(Ge,null):i.a.createElement(De,null))}}]),t}(n.Component);var Pe={signInWithToken:Le.signInWithToken},Ue=Object(l.b)(function(e){return{auth:e.auth}},Pe)(_e),Ve=function(e){function t(e){return Object(m.a)(this,t),Object(h.a)(this,Object(v.a)(t).call(this,e))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"navbar"},i.a.createElement("div",{className:"navbar-inner"},i.a.createElement("div",{className:"navbar-menu"},i.a.createElement(b.b,{to:"/"},i.a.createElement("img",{src:"/logo.png"}))),i.a.createElement("div",{className:"navbar-right"},i.a.createElement(Ue,null))))}}]),t}(n.Component),Je=(a(89),function(e){return i.a.createElement("div",{className:"sidebar-item-content"},e.img&&i.a.createElement("img",{src:e.img,alt:"",className:"sidebar-item-icon"}),i.a.createElement("div",null,e.title))});var Fe=Object(l.b)(function(e){return{auth:e.auth}},void 0)(function(e){var t=e.auth.toJS();return i.a.createElement("div",{className:"sidebar"},i.a.createElement("div",{className:"sidebar-content"},i.a.createElement(b.c,{className:"sidebar-item",activeClassName:"active",exact:!0,to:"/"},i.a.createElement(Je,{img:"/home.svg",title:"\ud648"})),i.a.createElement(b.c,{className:"sidebar-item",activeClassName:"active",to:"/movie"},i.a.createElement(Je,{img:"/movie.svg",title:"\uc601\ud654"})),i.a.createElement(b.c,{className:"sidebar-item",activeClassName:"active",to:"/theater"},i.a.createElement(Je,{img:"/theater.svg",title:"\uc601\ud654\uad00"})),i.a.createElement(b.c,{className:"sidebar-item",activeClassName:"active",to:"/ticket"},i.a.createElement(Je,{img:"/ticket.svg",title:"\ud2f0\ucf13 \uc608\ub9e4"})),t.adminType&&i.a.createElement(b.c,{className:"sidebar-item",activeClassName:"active",to:"/admin"},i.a.createElement(Je,{img:"/medal.png",title:"\uad00\ub9ac\uc790"}))),i.a.createElement("div",{className:"sidebar-footer"},i.a.createElement("div",{className:"members"},i.a.createElement("span",null,"HYU ERICA CAMPUS"),i.a.createElement("span",null,"CSE3010 DATABASE PBL A01"),i.a.createElement("span",null,"\uae40\uc6d0\ubc30 \ubc15\uc11c\uc5f0 \uc624\uc775\uc900"),i.a.createElement("span",null,"\uc774\uc138\uba85 \uc774\ud6a8\uc6d0 \ud55c\uc608\uc9c4")),i.a.createElement("div",{className:"footer-copyright"},"\xa9 2019 EricaCinema")))}),We=(a(90),function(){return i.a.createElement("div",null,"404 NOT FOUND")}),He=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).initUserInfo=Object(d.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=JSON.parse(sessionStorage.getItem("user"))){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,a.props.signInWithToken(t.token);case 5:case"end":return e.stop()}},e)})),a.clearAlert=a.clearAlert.bind(Object(p.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.initUserInfo()}},{key:"clearAlert",value:function(){this.props.clearAlert()}},{key:"render",value:function(){var e=this.props.alert,t=this.props.auth.toJS();return i.a.createElement(b.a,null,i.a.createElement("div",{className:"header"},i.a.createElement(Ve,null)),i.a.createElement("div",{className:"section"},i.a.createElement(Fe,null),i.a.createElement("div",{className:"container"},i.a.createElement(g.d,null,i.a.createElement(g.b,{path:"/signup",component:$e}),i.a.createElement(g.b,{path:"/movie",component:I}),i.a.createElement(g.b,{path:"/theater",component:P}),i.a.createElement(g.b,{path:"/ticket",component:H}),t.isSigned&&i.a.createElement(g.b,{path:"/mypage",component:Se}),t.adminType&&i.a.createElement(g.b,{path:"/admin",component:ke}),i.a.createElement(g.b,{exact:!0,path:"/",component:je}),i.a.createElement(g.b,{component:We})," "))),e.type&&i.a.createElement("div",{id:"alert"},i.a.createElement("div",{id:"body"},i.a.createElement("div",{id:"type",className:e.type}),i.a.createElement("span",{id:"message"},e.message),i.a.createElement("div",{id:"close",onClick:this.clearAlert},"\ub2eb\uae30"))))}}]),t}(n.Component);var Be={signInWithToken:Le.signInWithToken,clearAlert:A.clear},ze=Object(l.b)(function(e){return{alert:e.alert,auth:e.auth}},Be)(He),Ye=(a(91),function(e){var t,a=e.type,n=e.title,c=e.name,r=e.value;return i.a.createElement("div",{id:"field"},i.a.createElement("span",{id:"title"},n),i.a.createElement("div",{id:"body"},i.a.createElement("input",(t={type:"text"},Object(U.a)(t,"type",a),Object(U.a)(t,"name",c),Object(U.a)(t,"value",r),Object(U.a)(t,"onChange",function(t){e.onChange(t)}),Object(U.a)(t,"autoComplete","off"),t))))}),qe=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(v.a)(t).call(this,e))).state={email:"",name:"",password:"",rePassword:""},a.handleChange=a.handleChange.bind(Object(p.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(p.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(U.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.email,i=a.name,c=a.password,r=a.rePassword;n&&i&&c&&c===r?C.a.post("".concat(O,"/user/register"),this.state).then(function(e){var a=e.data,n=a.ok,i=a.message;n?(t.props.history.goBack(),t.props.successAlert("\ud68c\uc6d0\uac00\uc785 \uc644\ub8cc")):t.props.errorAlert(i)}).catch(function(e){}):this.props.errorAlert("\ud544\ub4dc\ub97c \ubaa8\ub450 \ucc44\uc6cc\uc8fc\uc138\uc694.")}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.name,n=e.password,c=e.rePassword;return i.a.createElement("div",{id:"signup"},i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement(Ye,{title:"\uc774\uba54\uc77c",name:"email",value:t,onChange:this.handleChange}),i.a.createElement(Ye,{title:"\uc774\ub984",name:"name",value:a,onChange:this.handleChange}),i.a.createElement(Ye,{title:"\ud328\uc2a4\uc6cc\ub4dc",type:"password",name:"password",value:n,onChange:this.handleChange}),i.a.createElement(Ye,{title:"\ud328\uc2a4\uc6cc\ub4dc \uc7ac\uc785\ub825",type:"password",name:"rePassword",value:c,onChange:this.handleChange}),i.a.createElement("button",{id:"submit"},"\uac00\uc785")))}}]),t}(n.Component),Ke={successAlert:A.success,errorAlert:A.error},$e=Object(l.b)(void 0,Ke)(qe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Qe=a(21),Xe=a(45),Ze=Object(k.b)({isSigned:!1});var et=Object(Qe.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case D.SIGNIN_SUCCESS:return e.merge({isSigned:!0,email:n.email,name:n.name,adminType:n.admin});case D.SIGNOUT:return Ze;default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M.SUCCESS:return{type:"alert-success",message:t.message};case M.ERROR:return{type:"alert-error",message:t.message};case M.CLEAR:return{};default:return e}}}),tt=Object(Qe.d)(et,Object(Qe.a)(Xe.a));r.a.render(i.a.createElement(l.a,{store:tt},i.a.createElement(ze,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[46,1,2]]]);
//# sourceMappingURL=main.9341448b.chunk.js.map